<html>

<head>
<title>QR Code Generator</title>
<script src="./qr.js"></script>
<link rel="stylesheet" href="./qr.css">
</head>

<body onload="SetupDragAndDrop(); SetImage('./QR.webp');">
<div id="drop-area">

<h1 align='center'>QR Code Generator</h1>
<font size='-1'>Drag and Drop an image below</font><br/>

<canvas id="imageInput"></canvas>
<canvas id="imagePixel"></canvas>
<canvas id="imageDithered"></canvas>
<a id="download" href="about:blank" download="qr.webp" target="_blank" title="Download QR Code">
  <canvas id="output"></canvas>
</a>
<br/>

Embedded text:<br/>
<textarea id="text" cols="50" rows="3" onchange='GenerateQRCode();'>https://skal65535.github.io/QR</textarea>
<br/>
<button id="go" onclick="GenerateQRCode();">Generate QR Code</button>
<br/>

<table>
<tr><td>Error correction:</td><td>
<select id="error_level_selector" onchange='GenerateQRCode();'>
  <option value="L">Low (7%)</option>
  <option value="M">Medium (15%)</option>
  <option value="Q">Quartile (25%)</option>
  <option value="H" selected>High (30%)</option>
</select>
<br/>
</td></tr>

<tr><td>QR size:</td><td>
<select id="size_selector" onchange='GenerateQRCode();'>
  <option value="0">Auto</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6" selected>6</option>
  <option value="7">7</option>
  <option value="8">8</option>
  <option value="9">9</option>
  <option value="10">10</option>
</select>
<div style="display:inline;" id='resolution'></div>
<br/>
</td></tr>

<tr><td>Background:</td><td>
<select id="background" onchange='GenerateQRCode();'>
  <option value="image" selected>Image</option>
  <option value="noise">Noise</option>
  <option value="trans">None</option>
</select><br/>
</td></tr>

<tr><td>Pixel size:</td><td>
<select id="pixel_size_selector" onchange='GenerateQRCode();'>
  <option value="1">1 x 1</option>
  <option value="2" selected>2 x 2</option>
  <option value="3">3 x 3</option>
  <option value="4">4 x 4</option>
</select><br/>
</td></tr>

<tr><td>Dithering:</td><td>
<select id="dithering_selector" onchange='GenerateQRCode();'>
  <option value="diffusion" selected>Diffusion</option>
  <option value="ordered">Ordered</option>
  <option value="random">Random</option>
  <option value="none">None</option>
</select><br/>
</td></tr>

<tr><td>Gray levels:</td><td>
<select id="gray_selector" onchange='GenerateQRCode();'>
  <option value="2" selected>2</option>
  <option value="4">4</option>
  <option value="16">16</option>
  <option value="256">All (256)</option>
</select><br/>
</td></tr>

<tr><td>Luminosity:</td><td>
<select id="luma_selector" onchange='GenerateQRCode();'>
  <option value="0">dark</option>
  <option value="128" selected>normal</option>
  <option value="255">light</option>
</select><br/>
</td></tr>

<tr><td>Alpha cutoff:</td><td>
<select id="alpha_selector" onchange='GenerateQRCode();'>
  <option value="0">(off)</option>
  <option value="64" >low</option>
  <option value="128" selected>mid</option>
  <option value="255">high</option>
</select>
<div style="display:inline;">(controls transparent areas)</div>
<br/>
</td></tr>
</table>

<br/>
Original idea by <a href='https://codepen.io/xiongbinsh/full/goyobm'>Xiong Bin</a>.
See also <a href='https://cgv.cs.nthu.edu.tw/projects/Recreational_Graphics/Halftone_QRCodes'>this paper</a>,
as mentioned by <a href='https://www.realtimerendering.com/blog/cooler-qr-codes/'>E. Haines</a>.

<form action="https://skal65535.github.io/">
  <input type="submit" value="skal 2023"
         style='float: right; border-radius: 5px; padding: 5px;
                background: #cce; border: 1px solid #112;'
         onmouseover='this.style.background="#cdf"'
         onmouseout='this.style.background="#cce"'/>
</form>

</div>  <!-- main div -->

</body>
</html>
